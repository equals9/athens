{"version":3,"sources":["athens/devcards/blocks.cljs"],"mappings":"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","names":["athens.devcards.blocks/datoms","posh.reagent/transact!","athens.db/dsdb","athens.devcards.blocks/block-style","athens.devcards.blocks/block-disclosure-toggle-style","athens.style.color.cljs$core$IFn$_invoke$arity$1","athens.devcards.blocks/block-indicator-style","G__58021","garden.selectors/&","garden.selectors/after","athens.style/OPACITIES","G__58022","garden.selectors/before","G__58023","stylefy.core.keyframes.cljs$core$IFn$_invoke$arity$variadic","athens.devcards.blocks/drop-area-indicator","athens.devcards.blocks/block-content-style","athens.devcards.blocks/tooltip-style","athens.style/DEPTH-SHADOWS","athens.style.color.cljs$core$IFn$_invoke$arity$2","athens.devcards.blocks/block-component","ident","block","posh.reagent/pull","athens.db/block-pull-pattern","cljs.core/deref","athens.db/sort-block","athens.devcards.blocks/block-el","p__58024","map__58025","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","uid","string","open","order","children","map__58027","open?","and__4174__auto__","cljs.core/seq","closed?","cljs.core/not","editing-uid","G__58028","re-frame.core/subscribe","tooltip-uid","G__58029","x","y","dragging-uid","closest-uid","closest-kind","G__58030","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","stylefy.core.use_style.cljs$core$IFn$_invoke$arity$2","G__58032","G__58033","athens.devcards.blocks/toggle","js/module$node_modules$$material_ui$icons$index.KeyboardArrowDown","stylefy.core.use_style.cljs$core$IFn$_invoke$arity$1","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","clojure.string.join.cljs$core$IFn$_invoke$arity$2","athens.router/navigate-uid","iter__4582__auto__","s__58035","cljs.core/LazySeq","temp__5735__auto__","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__58037","cljs.core/chunk-buffer","i__58036","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__58034","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","ch","map__58038","map__58040","komponentit.autosize/textarea","e","G__58042","G__58043","G__58044","G__58045","G__58046","athens.devcards.blocks/on-key-down","athens.parse-renderer/parse-and-render","s__58048","b__58050","i__58049","iter__58047","child","G__58051","G__58052","key","val","selection-start","cljs.core.prn.cljs$core$IFn$_invoke$arity$variadic","cljs.core.subs.cljs$core$IFn$_invoke$arity$2","goog.events.KeyCodes/ENTER","devcards.core/register-card","devcards.core/card-base","js/athens","js/athens.devcards","js/athens.devcards.blocks","js/athens.devcards.blocks.t_athens$devcards$blocks58053","athens.devcards.blocks/t_athens$devcards$blocks58053","_58055","meta58054","this__38808__auto__","devcard-opts__38809__auto__","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","v__38827__auto__","cljs.core/fn?","data-atom__38828__auto__","owner__38829__auto__","reagent.core/as-element","devcards.core/assert-options-map","this__4428__auto__","writer__4429__auto__","opt__4430__auto__","cljs.core/-write","athens.devcards.blocks/->t_athens$devcards$blocks58053","cljs.core/chunk-first"],"sourcesContent":["(ns athens.devcards.blocks\n  (:require\n    [\"@material-ui/icons\" :as mui-icons]\n    [athens.db :as db]\n    [athens.parse-renderer :refer [parse-and-render]]\n    [athens.router :refer [navigate-uid]]\n    [athens.style :refer [color OPACITIES DEPTH-SHADOWS]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [devcards.core :refer-macros [defcard-rg]]\n    [garden.selectors :as selectors]\n    [komponentit.autosize :as autosize]\n    [posh.reagent :refer [transact! pull]]\n    [re-frame.core :as rf]\n    [stylefy.core :as stylefy :refer [use-style]])\n  (:import\n    (goog.events\n      KeyCodes)))\n\n\n(def datoms\n  [{:db/id          2381\n    :block/uid      \"OaSVyM_nr\"\n    :block/open     true\n    :node/title     \"Athens FAQ\"\n    :block/children [{:db/id          2158\n                      :block/uid      \"BjIm6GeRP\"\n                      :block/string   \"Why open-source?\"\n                      :block/open     true\n                      :block/order    3\n                      :block/children [{:db/id        2163\n                                        :block/uid    \"GNaf3XzpE\"\n                                        :block/string \"The short answer is the security and privacy of your data.\"\n                                        :block/open   true\n                                        :block/order  1}\n                                       {:db/id          2347\n                                        :block/uid      \"jbiKpcmIX\"\n                                        :block/string   \"Firstly, I wouldn't be surprised if Roam was eventually open-sourced.\"\n                                        :block/open     true\n                                        :block/order    0\n                                        :block/children [{:db/id        2176\n                                                          :block/uid    \"gVINXaN8Y\"\n                                                          :block/string \"Suffice it to say that Roam being open-source is undeniably something that the team has already considered. Why is it not open-source already? You'd have to ask the Roam team, but Roam, a business, is not obligated to open-source anything.\"\n                                                          :block/open   true\n                                                          :block/order  2}\n                                                         {:db/id          2346\n                                                          :block/uid      \"ZOxwo0K_7\"\n                                                          :block/string   \"The conclusion of the [[Roam White Paper]] states that Roam's vision is a collective, \\\"open-source\\\" intelligence.\"\n                                                          :block/open     true\n                                                          :block/order    0\n                                                          :block/children [{:db/id        2174\n                                                                            :block/uid    \"WKWPPSYQa\"\n                                                                            :block/string \"((ZOxwo0K_7))\"\n                                                                            :block/open   true\n                                                                            :block/order  0}]}\n                                                         {:db/id        2349\n                                                          :block/uid    \"VQ-ybRmNh\"\n                                                          :block/string \"In the Roam Slack, I recall Conor saying one eventual goal is to work on a protocol that affords interoperability between open source alternatives. I would share the message but can't find it because of Slack's 10k message limit.\"\n                                                          :block/open   true\n                                                          :block/order  1}\n                                                         {:db/id        2351\n                                                          :block/uid    \"PGGS8MFH_\"\n                                                          :block/string \"Ultimately, we don't know when/if Roam will be open-sourced, but it's possible that Athens could accelerate or catalyze this. Regardless, there will always be some who are open-source maximalists and some who want to self-host, because that's probably really the most secure thing you can do (if you know what you're doing).\"\n                                                          :block/open   true\n                                                          :block/order  3}]}]}]}])\n\n\n(transact! db/dsdb datoms)\n\n;;; Styles\n\n\n(def block-style\n  {:display \"flex\"\n   :line-height \"32px\"\n   :justify-content \"flex-start\"\n   :flex-direction \"column\"})\n\n\n(def block-disclosure-toggle-style\n  {:width \"16px\"\n   :height \"32px\"\n   :flex-shrink \"0\"\n   :display \"flex\"\n   :background \"none\"\n   :border \"none\"\n   :border-radius \"100px\"\n   :transition \"all 0.05s ease\"\n   :align-items \"center\"\n   :justify-content \"center\"\n   :padding \"0\"\n   :-webkit-appearance \"none\"\n   ::stylefy/mode [[:hover {:color (color :link-color)}]\n                   [\":is(button)\" {:cursor \"pointer\"}]]\n   ::stylefy/manual [[:&.closed [:svg {:transform \"rotate(-90deg)\"}]]]})\n\n\n(def block-indicator-style\n  {:flex-shrink \"0\"\n   :cursor \"pointer\"\n   :width \"12px\"\n   :margin-right \"4px\"\n   :transition \"all 0.05s ease\"\n   :height \"32px\"\n   :color (color :panel-color)\n   ::stylefy/mode [[:after {:content \"''\"\n                            :background \"currentColor\"\n                            :transition \"all 0.05s ease\"\n                            :border-radius \"100px\"\n                            :box-shadow \"0 0 0 2px transparent\"\n                            :display \"inline-flex\"\n                            :margin \"50% 0 0 50%\"\n                            :transform \"translate(-50%, -50%)\"\n                            :height \"5px\"\n                            :width \"5px\"}]\n                   [:hover {:color (color :link-color)}]]\n                  ;;  [:before {:content \"''\"\n                  ;;            :position \"absolute\"\n                  ;;            :top \"24px\"\n                  ;;            :bottom \"0\"\n                  ;;            :pointer-events \"none\"\n                  ;;            :left \"22px\"\n                  ;;            :width \"1px\"\n                  ;;            :background (color :panel-color)}]\n\n   ::stylefy/manual [[:&.open {}]\n                     [:&.closed {}]\n                     [:&.closed [(selectors/& (selectors/after)) {:box-shadow (str \"0 0 0 2px \" (color :body-text-color))\n                                                                  :opacity (:opacity-med OPACITIES)}]]\n                     [:&.closed [(selectors/& (selectors/before)) {:content \"none\"}]]\n                     [:&.closed [(selectors/& (selectors/before)) {:content \"none\"}]]\n                     [:&:hover:after {:transform \"translate(-50%, -50%) scale(1.3)\"}]\n                     [:&.dragging {:z-index \"1000\"\n                                   :cursor \"grabbing\"\n                                   :color (color :body-text-color)}]\n                     [:&.selected {}]]})\n\n\n(stylefy/keyframes \"drop-area-appear\"\n                   [:from\n                    {:opacity \"0\"}]\n                   [:to\n                    {:opacity \"1\"}])\n\n\n(stylefy/keyframes \"drop-area-color-pulse\"\n                   [:from\n                    {:opacity (:opacity-lower OPACITIES)}]\n                   [:to\n                    {:opacity (:opacity-med OPACITIES)}])\n\n\n(def drop-area-indicator\n  {:display \"block\"\n   :height \"1px\"\n   :margin-bottom \"-1px\"\n   :color (color :body-text-color)\n   :position \"relative\"\n   :transform-origin \"left\"\n   :z-index \"1000\"\n   :width \"100%\"\n   :animation \"drop-area-appear .5s ease\"\n   ::stylefy/manual [[:&:after {:position \"absolute\"\n                                :content \"''\"\n                                :top \"-0.5px\"\n                                :right \"0\"\n                                :bottom \"-0.5px\"\n                                :left \"0\"\n                                :border-radius \"100px\"\n                                :animation \"drop-area-color-pulse 1s ease infinite alternate\"\n                                :background \"currentColor\"}]]})\n\n\n(def block-content-style\n  {:position \"relative\"\n   :overflow \"visible\"\n   :word-break \"break-word\"\n   ::stylefy/manual [[:textarea {:display \"none\"}]\n                     [:&:hover [:textarea {:display \"block\"\n                                           :z-index 1}]]\n                     [:textarea {:-webkit-appearance \"none\"\n                                 :cursor \"text\"\n                                 :resize \"none\"\n                                 :transform \"translate3d(0,0,0)\"\n                                 :color \"inherit\"\n                                 :padding \"0\"\n                                 :background (color :panel-color)\n                                 :position \"absolute\"\n                                 :top \"0\"\n                                 :left \"0\"\n                                 :right \"0\"\n                                 :width \"100%\"\n                                 :min-height \"100%\"\n                                 :caret-color (color :link-color)\n                                 :margin \"0\"\n                                 :font-size \"inherit\"\n                                 :line-height \"inherit\"\n                                 :border-radius \"4px\"\n                                 :transition \"opacity 0.15s ease\"\n                                 :box-shadow (str \"-4px 0 0 0\" (color :panel-color))\n                                 :border \"0\"\n                                 :opacity \"0\"\n                                 :font-family \"inherit\"}]\n                     [:textarea:focus\n                      :.isEditing {:outline \"none\"\n                                   :z-index \"10\"\n                                   :display \"block\"\n                                   :opacity \"1\"}]\n                     [:span [:span\n                             :a {:position \"relative\"\n                                 :z-index \"2\"}]]]})\n\n\n(def tooltip-style\n  {:z-index    1 :position \"absolute\" :left \"-200px\"\n   :box-shadow [[(:64 DEPTH-SHADOWS) \", 0 0 0 1px \" (color :body-text-color :opacity-lower)]]\n   :display    \"flex\" :flex-direction \"column\"\n   :background-color \"white\"\n   :padding \"5px 10px\"\n   :border-radius \"4px\"})\n\n\n;;; Components\n\n\n(declare block-component block-el toggle on-key-down)\n\n\n(defn block-component\n  \"This query is long because I'm not sure how to recursively find all child blocks with all attributes\n  '[* {:block/children [*]}] doesn't work\nAlso, why does datascript return a reaction of {:db/id nil} when pulling for [:block/uid uid]?\nno results for q returns nil\nno results for pull eid returns nil\n  \"\n  [ident]\n  (let [block (->> @(pull db/dsdb db/block-pull-pattern ident)\n                   (db/sort-block))]\n    [block-el block]))\n\n\n;; TODO: more clarity on open? and closed? predicates, why we use `cond` in one case and `if` in another case\n(defn block-el\n  \"Two checks to make sure block is open or not: children exist and :block/open bool\"\n  [{:block/keys [uid string open order children]}]\n  (let [open?       (and (seq children) open)\n        closed?     (and (seq children) (not open))\n        editing-uid @(rf/subscribe [:editing-uid])\n        tooltip-uid @(rf/subscribe [:tooltip-uid])\n        {:keys        [x y]\n         dragging-uid :uid\n         closest-uid  :closest/uid\n         closest-kind :closest/kind} @(rf/subscribe [:drag-bullet])]\n\n    [:div (merge (use-style block-style\n                            {:class    \"block-container\"\n                             :data-uid uid}))\n     [:div {:style {:display \"flex\"}}\n\n      ;; Toggle\n      (if (seq children)\n        [:button (use-style block-disclosure-toggle-style\n                            {:class (cond open? \"open\" closed? \"closed\")\n                             :on-click #(toggle [:block/uid uid] open)})\n         [:> mui-icons/KeyboardArrowDown {:style {:font-size \"16px\"}}]]\n        [:span (use-style block-disclosure-toggle-style)])\n\n      ;; Bullet\n      (if (= dragging-uid uid)\n        [:span (merge (use-style block-indicator-style\n                                 {:class    (clojure.string/join \" \" [\"bullet\" \"dragging\" (if closed? \"closed\" \"open\")])\n                                  :data-uid uid})\n                      {:style {:transform (str \"translate(\" x \"px, \" y \"px)\")}})]\n\n        [:span (use-style block-indicator-style\n                          {:class    (str \"bullet \" (if closed? \"closed\" \"open\"))\n                           :data-uid uid\n                           :on-click #(navigate-uid uid)})])\n\n      ;; Tooltip\n      (when (and (= tooltip-uid uid)\n                 (not dragging-uid))\n        [:div (use-style tooltip-style {:class \"tooltip\"})\n         [:span [:b \"uid: \"] uid]\n         [:span [:b \"order: \"] order]\n         (when children\n           [:<>\n            [:span [:b \"children: \"]]\n            (for [ch children]\n              (let [{:block/keys [uid order]} ch]\n                [:span {:style {:margin-left \"20px\"} :key uid}\n                 [:b \"order: \"] [:span order]\n                 [:span \" | \"]\n                 [:b \"uid: \"] [:span uid]]))])])\n\n      ;; Actual Contents\n      [:div (use-style (merge block-content-style {:width       \"100%\"\n                                                   :user-select (when dragging-uid \"none\")})\n                       {:class    \"block-contents\"\n                        :data-uid uid})\n       [autosize/textarea {:value       string\n                           :class       (when (= editing-uid uid) \"isEditing\")\n                           :auto-focus  true\n                           :on-change   (fn [e]\n                                            ;;(prn (.. e -target -value)))\n                                          (transact! db/dsdb [[:db/add [:block/uid uid] :block/string (.. e -target -value)]]))\n                           :on-key-down (fn [e] (on-key-down e [:block/uid uid] order))}]\n       [parse-and-render string]\n\n       ;; Drop Indicator\n       (when (and (= closest-uid uid)\n                  (= closest-kind :child))\n         [:span (use-style drop-area-indicator)])]]\n\n     ;; Children\n     (when open?\n       (for [child children]\n         [:div {:style {:margin-left \"32px\"} :key (:db/id child)}\n          [block-el child]]))\n\n     (when (and (= closest-uid uid) (= closest-kind :sibling))\n       [:span (use-style drop-area-indicator)])]))\n\n;; Helpers\n\n(defn toggle\n  [ident open]\n  (transact! db/dsdb [{:db/id ident :block/open (not open)}]))\n\n\n(defn on-key-down\n  [e ident order]\n  (let [key             (.. e -keyCode)\n        val             (.. e -target -value)\n        selection-start (.. e -target -selectionStart)]\n    (prn \"KEYDOWN\" selection-start (subs val selection-start) key ident order KeyCodes.ENTER)\n    (cond\n      ;;(= key KeyCodes.ENTER)\n      ;;(transact! db/dsdb\n      ;;  ;; FIXME original block doesn't update. textarea and `on-change` prevents update\n      ;;           [;;{:db/id ident\n      ;;   ;; :block/string (subs val 0 selection-start)}\n      ;;            {;; random-uuid generates length 36 id. Roam uids are 9\n      ;;             :block/uid       (subs (str (random-uuid)) 27)\n      ;;             :block/string    (subs val selection-start)\n      ;;    ;; FIXME makes current block the parent\n      ;;             :block/_children ident\n      ;;    ;; FIXME. order is dependent on parent\n      ;;             :block/order     (inc order)\n      ;;             :block/open      true}])\n\n      :else nil)))\n\n;;; Devcards\n\n\n(defcard-rg Block\n  \"Pull entity 2347, a block within Athens FAQ, and its children. Doesn't pull parents, unlike `block-page`\"\n  [block-component 2347])\n"]}