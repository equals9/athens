{"version":3,"sources":["athens/devcards/right_sidebar.cljs"],"mappings":"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","names":["athens.devcards.right-sidebar/right-sidebar-style","athens.style.color.cljs$core$IFn$_invoke$arity$2","athens.devcards.right-sidebar/content-style","athens.devcards.right-sidebar/toggle-page-style","athens.devcards.right-sidebar/uids","athens.devcards.right-sidebar/right-sidebar-el","state","uids","G__68236","G__68237","G__68238","posh.reagent/q","athens.db/dsdb","cljs.core/vec","cljs.core/deref","cljs.core/reduce-kv","p__68232","vec__68233","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","m","_","uid","title","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","s","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","stylefy.core.use_style.cljs$core$IFn$_invoke$arity$1","cljs.core.doall.cljs$core$IFn$_invoke$arity$1","iter__4582__auto__","s__68240","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__68242","cljs.core/chunk-buffer","i__68241","vec__68243","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","map__68246","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__68239","cljs.core/chunk-rest","vec__68248","cljs.core/first","map__68251","cljs.core/cons","cljs.core/rest","open","stylefy.core.use_style.cljs$core$IFn$_invoke$arity$2","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4","cljs.core/update-in","cljs.core/not","js/module$node_modules$$material_ui$icons$index.KeyboardArrowDown","athens.devcards.node-page/node-page-component","G__68253","re-frame.core/dispatch","js/module$node_modules$$material_ui$icons$index.Close","athens.devcards.right-sidebar/right-sidebar-component","G__68254","re-frame.core/subscribe","cljs.core/chunk-first"],"sourcesContent":["(ns athens.devcards.right-sidebar\n  (:require\n    [\"@material-ui/icons\" :as mui-icons]\n    [athens.db :as db]\n    [athens.devcards.buttons :refer [button-primary]]\n    [athens.devcards.node-page :refer [node-page-component]]\n    [athens.style :refer [color #_OPACITIES]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [devcards.core :refer [defcard-rg]]\n    [posh.reagent :refer [q]]\n    [re-frame.core :refer [dispatch subscribe]]\n    [reagent.core :as r]\n    [stylefy.core :as stylefy :refer [use-style #_use-sub-style]]))\n\n\n;;; Styles\n\n\n(def right-sidebar-style\n  {:grid-area \"secondary-content\"\n   :width \"600px\"\n   :height \"100%\"\n   :border \"1px solid lightgray\"\n   :background-color (color :panel-color :opacity-low)\n   :display \"flex\"\n   :justify-content \"space-between\"\n   :padding \"30px\"})\n\n\n(def content-style\n  {:display \"flex\"\n   :flex-direction \"column\"\n   :overflow-y \"auto\"})\n\n\n(def toggle-page-style\n  {:margin-top \"30px\"\n   :margin-right \"10px\"\n   :cursor \"pointer\"})\n\n;;; Components\n\n(def uids\n  [\"OaSVyM_nr\"\n   \"p1Xv2crs3\"])\n\n\n(defn right-sidebar-el\n  [state]\n  (let [uids (->> @(q '[:find ?uid ?title\n                        :in $ [?uid ...]\n                        :where\n                        [?e :block/uid ?uid]\n                        [?e :node/title ?title]]\n                      db/dsdb uids)\n                  vec\n                  (reduce-kv\n                    (fn [m _ [uid title]]\n                      (assoc m uid {:open  false\n                                    :title title}))\n                    {}))\n        s (r/atom {:uids uids})]\n    (when (:open state)\n      [:div (use-style right-sidebar-style)\n       [:div (use-style content-style)\n        (doall\n          (for [[uid {:keys [open title]}] (:uids @s)]\n            ^{:key uid}\n            [:div {:style {:display \"flex\"}}\n             [:span (use-style toggle-page-style\n                      {:on-click (fn [_]\n                                   (swap! s update-in [:uids uid :open] not))})\n              [:> mui-icons/KeyboardArrowDown]]\n             (if open\n               [node-page-component [:block/uid uid]]\n               [:div [:h1 title]])]))]\n       [:div {:on-click (fn [_] (dispatch [:toggle-right-sidebar]))}\n        [:> mui-icons/Close]]])))\n\n\n(defn right-sidebar-component\n  []\n  (let [state @(subscribe [:right-sidebar])]\n    ;;(prn state)\n    [right-sidebar-el state]))\n\n\n;;; Devcards\n\n\n;;(defcard-rg Init\n;;  [button-primary {:label \"Toggle\" :on-click-fn #(dispatch [:open-in-rightbar \"data\"])}])\n\n\n\n(defcard-rg Toggle\n  [button-primary {:label \"Toggle\" :on-click-fn #(dispatch [:toggle-right-sidebar])}])\n\n\n(defcard-rg Right-Sidebar\n  [:div {:style {:display \"flex\" :height \"60vh\" :justify-content \"flex-end\"}}\n   [right-sidebar-component]]\n  {:padding false})\n"]}